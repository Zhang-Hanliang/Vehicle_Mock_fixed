# This file is maintained by velocitas CLI, do not modify manually. Change settings in .velocitas.json
# Copyright (c) 2022-2024 Contributors to the Eclipse Foundation
#
# SPDX-License-Identifier: Apache-2.0

name: Build CCU vehicle-mock

on:
  workflow_dispatch:
  workflow_call:
  #push:
  #  branches:
  #    - main

permissions:
  contents: read
  packages: write
  actions: write
  checks: write

jobs:
  get-app-name:
    runs-on: ubuntu-22.04
    name: Get App-Name
    outputs:
      app_name: ${{ steps.export-app-name.outputs.app_name }}
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
      - name: Get app-name
        id: export-app-name
        run: |
          NAME="CCU vehicle-mock"
          echo "app_name=$NAME" >> $GITHUB_OUTPUT

  build-image-arm64:
    uses: ./.github/workflows/build-ccu-vehicle-mock-single.yml
    needs: [get-app-name]
    with:
      platform: arm64
      app_name: ${{ needs.get-app-name.outputs.app_name }}